doctype html
html(lang='it')
    head
        title PayPac

        //Importa Font Google Icon
        link(href='https://fonts.googleapis.com/icon?family=Material+Icons' rel='stylesheet')

        //Importa materialize.css
        link(rel='stylesheet' href='/stylesheets/materialize.css'  media='screen,projection')

        //Importa style.css
        link(rel='stylesheet' href='/stylesheets/style.css')

        //Comunica al browser che il sito Ã¨ ottimizato per mobile
        meta(name='viewport' content='width=device-width, initial-scale=1.0')

        //Aggiunta di jquery
        script(src='/javascripts/jquery.js')

        //Aggiunta icone
        link(rel='icon' href='/images/favicon.ico' type='image/x-icon')
        link(rel='shortcut icon' href='/images/favicon.ico' type='image/x-icon')

        style.
            body {
                display: flex;
                min-height: 100vh;
                flex-direction: column;
            }

            main {
                flex: 1 0 auto;
            }

            body {
                background: #fff;
            }

            .input-field input[type=date]:focus + label,
            .input-field input[type=text]:focus + label,
            .input-field input[type=email]:focus + label,
            .input-field input[type=password]:focus + label {
                color: #e91e63;
            }

            .input-field input[type=date]:focus,
            .input-field input[type=text]:focus,
            .input-field input[type=email]:focus,
            .input-field input[type=password]:focus {
                border-bottom: 2px solid #e91e63;
                box-shadow: none;
            }

            .datepicker-date-display {
                background-color: #03256C;
            }

            .datepicker-cancel, .datepicker-done {
                color: blue;
            }

            .datepicker-table td.is-today {
                color: blue;
            }

            .datepicker-table td.is-selected {
                color: white;
                background-color: blue;
            }

            .tabs .tab a {
                color: white;
                background-color: #03256C;
            }

            .tabs .tab a:hover {
                background-color: #eee;
                color: #000;
            }

            .tabs .tab a.active {
                background-color: blue;
                color: white;
            }

            .tabs .indicator {
                background-color: #DEB887;
            }

            .tabs .tab a:focus.active {
                background-color: blue;
            }

    body
        div.section
        main
            center
                img.responsive-img(style='width: 250px;' src='/images/logo.png')

                p.center
                    .container
                        != messages()

                h5.indigo-text Effettua il login
                div.section

                div.container
                    div.z-depth-1.grey.lighten-4.row(style='display: inline-block; padding: 32px 48px 0px 48px; border: 1px solid #EEE;')

                        form.col.s12(method='post' action='/login')
                            div.row
                                div.col.s12
                            div.row
                                div.input-field.col.s12
                                    input.validate(type='email' name='email' id='email' required='' aria-required='true')
                                    label(for='email')
                                        | Inserisci la tua email
                            div.row
                                div.input-field.col.s12
                                    input(type='password' name='password' id='password' required='' aria-required='true')
                                    label(for='password')
                                        | Inserisci la tua password
                                label(style='float: right;')
                                    a.pink-text.modal-trigger(href='#password-dimenticata')
                                        b Hai dimenticato la password?

                            br
                            center
                                div.row
                                    button(type='submit' name='btn_login' class='col s12 waves-effect waves-light btn blue darken-4' style='border-radius: 20px;')
                                        | Login
                a.modal-trigger(href='#registrazione')
                    | Crea un account
            div.section
            div.section

        div.modal#password-dimenticata
            div.modal-content
                form.col.s12(method='post' action='/recuperopassword')
                    div.row
                        div.col.s12
                            h4.center Recupero password
                    div.row
                        div.input-field.col.s12
                            input.validate(type='email' name='recemail' id='recemail' required='' aria-required='true')
                            label(for='recemail')
                                | Inserisci la tua email
                    center
                        div.row
                            div.input-field.col.s12
                                p.
                                    Conferma e controlla la tua email per iniziare la procedura di recupero della password

                        br

                        div.row
                            button(type='submit' name='btn_login' class='col s12 waves-effect waves-light btn blue darken-4' style='border-radius: 20px;')
                                | Conferma
            div.modal-footer
                a(href='#!')
                .modal-close.waves-effect.waves-green.btn-flat Annulla

        div.modal#registrazione
            div.modal-content
                form.col.s12(method='post' action='/registrazione')
                    div.row
                        div.col.s12
                            h4.center Registrazione
                    div.row
                        div.input-field.col.s12
                            input.validate(type='email' placeholder="email" name='regemail' id='regemail' required='' aria-required='true')
                            label(for='regemail')
                                | Email:
                    div.row
                        div.input-field.col.s6
                            input.validate(type='password' minlength=8 placeholder="password" name='regpassword' id='regpassword' required='' aria-required='true')
                            label(for='regpassword')
                                | Password:
                            span.helper-text(data-error='minimo 8 caratteri')
                        div.input-field.col.s6
                            input(type='password' minlength=8 placeholder="conferma password" name='confermapassword' id='confermapassword' required='' aria-required='true')
                            label(for='confermapassword')
                                | Conferma password:
                            span.helper-text(data-error='minimo 8 caratteri')
                    div.row
                        div.input-field.col.s6
                            input.validate(type='text' placeholder="telefono" name='regntel' id='regntel')
                            label(for='regntel')
                                | Numero di telefono: (facoltativo)
                        div.input-field.col.s6
                            input.validate(type='text' placeholder="id telegram" name='regidtel' id='regidtel')
                            label(for='regidtel')
                                | id Telegram per recezione notifiche: (facoltativo)

                    //Tab personale\aziendale
                    div.row
                        ul.tabs.row.col.s12#tabs-personale-aziendale
                            li.tab.col.s6#tabpersonale
                                a(href='#personale')
                                    | Conto personale
                            li.tab.col.s6#tabaziendale
                                a(href='#aziendale')
                                    | Conto aziendale

                        //Tab conto personale
                        div.col.s12#personale
                            div.input-field.row.col.s6.center-align
                                input.validate(type='text' placeholder="nome intestatario" name='regnomeint' id='regnomeint')
                                label(for='regnomeint')
                                    | Nome:
                            div.input-field.row.col.s6.center-align
                                input.validate(type='text' placeholder="cognome intestatario" name='regcognomeint' id='regcognomeint')
                                label(for='regcognomeint')
                                    | Cognome:
                            div.input-field.row.col.s6.center-align
                                input.validate(type='text' placeholder='codice fiscale' name='regcf' id='regcf')
                                label(for='regcf')
                                    | Codice fiscale:
                            div.input-field.row.col.s6.center-align
                                input.datepicker.validate(type='text' placeholder='inserisci data' name='regdatan' id='regdatan')
                                label(for='regdatan')
                                    | Data di nascita:

                        //Tab conto aziendale
                        div.col.s12#aziendale
                            div.input-field.row.col.s6.center-align
                                input.validate(type='text' placeholder='ragione sociale' name='regragsociale' id='regragsociale')
                                label(for='regragsociale')
                                    | Ragione Sociale:
                            div.input-field.row.col.s6.center-align
                                input.validate(type='text' placeholder='partita iva' name='regpiva' id='regpiva')
                                label(for='regpiva')
                                    | Partita Iva:
                        //valore da passare nella richiesta POST per riconoscere il tipo di profilo selezionato
                        input(type='hidden' name='regtabattiva' value='' id='regtabattiva')
                    br
                    center
                        div.row
                            button(type='submit' name='btn_reg' class='col s12 waves-effect waves-light btn blue darken-4' style='border-radius: 20px;')
                                | Registrati
            div.modal-footer
                a(href='#!')
                .modal-close.waves-effect.waves-green.btn-flat Annulla

        //JavaScript alla fine del body per ottimizzare il caricamento
        script(src='javascripts/materialize.js')
        script.
            //Aggiunta modal
            $('.modal').modal();
            //Aggiunta tabs
            $('.tabs').tabs();
            //Aggiunta datepicker
            $('.datepicker').datepicker({
                format: 'dd/mm/yyyy',
                firstDay: 1,
                showClearBtn: true
            });
            //Tab attiva
            $('#regtabattiva').val(0); //default
            $("#tabpersonale").click(function () {
                $('#regtabattiva').val(0);
            });
            $("#tabaziendale").click(function () {
                $('#regtabattiva').val(1);
            });
